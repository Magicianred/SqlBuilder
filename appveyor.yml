version: 1.0.{build}
image: Visual Studio 2017
cache: packages -> **\packages.config
nuget:
  account_feed: false
  project_feed: false
before_build:
- cmd: nuget restore
install:
  nuget sources add -Name AppVeyorAccount -source https://ci.appveyor.com/nuget/restlessmedia-fqb6idr6vwjb -UserName %APPVEYOR_USERNAME% -password "%APPVEYOR_PASSWORD%"
build:
  publish_nuget: true
  include_nuget_references: true
  verbosity: minimal
deploy:
  release: SqlBuilder-v$(appveyor_build_version)
  description: 'SqlBuilder $(appveyor_build_version)'
  provider: GitHub
  auth_token:
    secure: '%GITHUB_AUTHTOKEN%' # your encrypted token from GitHub
  artifact: /.*\.nupkg/            # upload all NuGet packages to release assets
  draft: false
  prerelease: false
  on:
    branch: master                 # release from master branch only
    APPVEYOR_REPO_TAG: true        # deploy on tag push only
